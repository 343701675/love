define("mui/common/js/tool",function(e,n,t){var a=e("mui/common/js/event");var i=e("mui/common/js/tm");var o=window;var r=document;var s=window.g_config=window.g_config||{};var l=/\.net$|com\.hk$/.test(o.location.hostname);var m;var u="";var c="";var f=l?"assets.daily.taobao.net":"assets.alicdn.com";var d=l?"g-assets.daily.taobao.net":"g.alicdn.com";var v=o.location.href.indexOf("https://")===0;var g="__MIX_CIRCULAR";var p=s.devId=="mobile"||s.devId=="m";var b=false;var h=+new Date;var y=4e3;var _=4e3;var I="load";var w="scroll";var S="mousemove keydown mousedown touchstart touchend";var T=/\\?\{([^{}]+)\}/g;var M="";var k={isApp:false,passCookie:true,loginServer:p?"//login.tmall.com/":"//login.tmall.com/",logoutServer:p?"//login.m.taobao.com/logout.htm":"//login.taobao.com/member/logout.jhtml",registerServer:"//register.tmall.com/",spaceServer:"//vip.tmall.com",miaoxinServer:"//miaoxin.tmall.com",loginHkServer:"//www.tmall.hk/wow/member-club/act/login"};var L=s.globalInstanceStatus={};var C=i.elCont;var x={siteNavConfig:k,isDaily:function(){return l},isPadApp:function(){return m},getAssetsHost:function(e){if(e==="g"){return d}else{return f}},isHttps:function(){return v},record:function(e){if(!e)return;(new Image).src=e},escapeHTML:function(e){var n=r.createElement("div"),t=r.createTextNode(e);n.appendChild(t);return n.innerHTML},available:function(e,n){var t=false;setTimeout(function(){t=true},5e3);setTimeout(function(){if(r.getElementById(e)){n()}else if(!t){setTimeout(arguments.callee,50)}},50)},contentReady:function(e,n){var t=false;setTimeout(function(){t=true},5e3);setTimeout(function(){var a=r.getElementById(e);if(a&&a.childNodes){n()}else if(!t){setTimeout(arguments.callee,50)}},50)},createLoader:function(e){var n,t,a=[],i;return function(o,r){if(r!==0&&!r){r=1}if(r&1&&!t){t=true;e(function(e){n=e;while(i=a.shift()){i&&i.apply(null,[n])}})}if(n!==undefined){o&&o.apply(null,[n]);return n}if(!(r&2)){o&&a.push(o)}return n}},whenInstanceReady:function(e,n){if(L[e]){n(i.instance[e])}else{i.Global.on(e+":ready",function(){n(i.instance[e])})}},instanceHandler:function(e,n){L[e]=true;i.instance[e]=n;i.Global.fire(e+":ready")},smartLazy:function(e,n){var t=C.bodyEl||(C.bodyEl=r.body);var i;var s={scroll:true,action:true,load:true,timeout:true};if(e&&e.call){s.callback=e;s.customDelay=n}else{s=x.merge(s,e)}var l=s.customDelay||y;var m=s.scroll;var u=s.action;var c=s.load;var f=s.timeout;var d=x.createLoader(function(e){var n=function(){setTimeout(function(){e(true)},0);if(m){a.detach(o,w,r)}if(u){a.detach(t,S,r)}if(f){clearTimeout(i)}};var r=n;if(c){if(!b){a.on(o,I,function(){setTimeout(function(){n()},_)})}else{var s=+new Date;var d=_-(s-(h||s));setTimeout(function(){n()},d>0?d:0)}}if(f){i=setTimeout(r,l+_)}if(u){a.on(t,S,r)}if(m){a.on(o,w,r)}});if(s.callback&&s.callback.call){d(function(){s.callback()},1)}},formatPoint:function(e){var n="";if(e>=0&&e<1e4){n=e}else if(e==1e4){n="1\u4e07"}else if(e<1e5){n=parseInt(e/1e3)/10+"\u4e07";if(e%1e3>0){n+="+"}}else if(e<1e6){n=parseInt(e/1e4)+"\u4e07";if(e%1e4>0){n+="+"}}else if(e<1e7){n=parseInt(e/1e6)+"\u767e\u4e07";if(e%1e6>0){n+="+"}}else if(e<1e8){n=parseInt(e/1e7)+"\u5343\u4e07";if(e%1e7>0){n+="+"}}else{n=parseInt(e/1e8)+"\u4ebf";if(e%1e8>0){n+="+"}}return n},getLoginUrl:function(){if(u){return u}else{var e=k.loginServer;var n=k.loginHkServer;var t=o.location.href;if(/^http.*(\/member\/login\.jhtml)$/i.test(t)){t=""}var a=k.redirectUrl||t;var i=a;if(a){if(s.isInternational||s.bizId==="hk"){e=n+"?redirect_url="+encodeURIComponent(i)}else{e+="?redirectURL="+encodeURIComponent(i)}}if(l){e="//login.daily.taobao.net/?redirect_url="+encodeURIComponent(i)}return u=e}},getLogoutUrl:function(){if(c){return c}else{var e="";if(l){e="//login.daily.taobao.net/member/logout.jhtml?f=top&redirectURL="+(p?encodeURIComponent(o.location.href):encodeURIComponent(x.getLoginUrl()))}else{e=k.logoutServer+"?redirectURL="+(p?encodeURIComponent(o.location.href):encodeURIComponent(x.getLoginUrl()))}return c=e}},endsWith:function(e,n){var t=e.length-n.length;return t>=0&&e.indexOf(n,t)===t},decode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},unparam:function(e,n,t){if(typeof e!=="string"||!e){return{}}n=n||"&";t=t||"=";var a={},i,o=function(e){return decodeURIComponent(e.replace(/\+/g," "))},r=e.split(n),s,l,m=0,u=r.length;for(;m<u;++m){i=r[m].indexOf(t);if(i===-1){s=o(r[m]);l=undefined}else{s=o(r[m].substring(0,i));l=r[m].substring(i+1);try{l=o(l)}catch(c){}if(x.endsWith(s,"[]")){s=s.substring(0,s.length-2)}}if(s in a){if(a[s]&&a[s].push){a[s].push(l)}else{a[s]=[a[s],l]}}else{a[s]=l}}return a},getCookie:function(e){var n,t;if(e&&e.length){if(t=String(r.cookie).match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)"))){n=t[1]?x.decode(t[1]):""}}return n},keys:function(e){var n=[],t,a;for(t in e){if(e.hasOwnProperty(t)){n.push(t)}}var i=!{toString:1}.propertyIsEnumerable("toString");var o=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];if(i){for(a=o.length-1;a>=0;a--){t=o[a];if(e.hasOwnProperty(t)){n.push(t)}}}return n},mix:function(e,n,t,a,i){if(typeof t==="object"){a=t.whitelist;i=t.deep;t=t.overwrite}if(a&&typeof a!=="function"){var o=a;a=function(e,n){return o.indexOf(e)>=0?n:undefined}}if(t===undefined){t=true}var r=[],s,l=0;x.mixInternal(e,n,t,a,i,r);while(s=r[l++]){delete s[g]}return e},merge:function(e){e=[].splice.call(arguments);var n={},t,a=e.length;for(t=0;t<a;t++){x.mix(n,e[t])}return n},_mix:function(e,n,t,a,i,o,r){if(a||!(e in n)||o){var s=n[e],l=t[e];if(s===l){if(s===undefined){n[e]=s}return}if(i){l=i.call(t,e,l)}if(o&&l&&typeof l==="object"){if(l[g]){n[e]=l[g]}else{var m=s&&typeof s==="object"?s:l.push?[]:{};n[e]=m;x.mixInternal(m,l,a,i,true,r)}}else if(l!==undefined&&(a||!(e in n))){n[e]=l}}},mixInternal:function(e,n,t,a,i,o){if(!n||!e){return e}var r,s,l,m;n[g]=e;o.push(n);l=x.keys(n);m=l.length;for(r=0;r<m;r++){s=l[r];if(s!==g){x._mix(s,e,n,t,a,i,o)}}return e},substitute:function(e,n,t){if(typeof e!=="string"||!n){return e}return e.replace(t||T,function(e,t){if(e.charAt(0)==="\\"){return e.slice(1)}return n[t]===undefined?M:n[t]})},addClass:function(e,n){e.className=e.className+" "+n},removeClass:function(e,n){e.className=e.className.replace(n,"")},requestFragment:function(e,n){var t;if(e&&e.indexOf&&e.indexOf("/")){t=e.split("/")[1];o[t]=function(e){n(e)};var a=function(){o[t]=undefined};feloader.getScript("//fragment.tmall.com/"+e+"?wh_callback=true",{charset:"utf-8",success:a,error:a,timeout:5})}}};var j="CSS1Compat",q="compatMode",E=Math.max,N="document",R="body",z="documentElement",H="viewport",B="scroll",F="client";["Width","Height"].forEach(function(e){x["doc"+e]=function(){return E(o[z][B+e],o[R][B+e],x[H+e](o))};x[H+e]=function(){var n=o["inner"+e];if(p&&n){return n}var t=F+e,a=o[N],i=a[R],r=a[z],s=r[t];return a[q]===j&&s||i&&i[t]||s}});var U=navigator.userAgent;if(U.indexOf("-PD/")>=0&&U.indexOf("AliApp")>=0){m=true}a.on(o,"load",function(){b=true;h=+new Date});i.globalToolFn=x;t.exports=x});