define("mui/common/js/site-nav",function(e,a,n){var t=e("mui/common/js/tool");var i=e("mui/common/js/event");var o={init:function(e){var a=window;var n=document;var o=a.g_config||{};var r=e.globalToolFn.isDaily();var s=!!(o.isInternational||o.bizId==="hk");var l=!!o.isSellerSite;var m=!"0"[0];var u=m&&!a.XMLHttpRequest;var c=n.documentMode===8;var f=n.documentMode===9;var d=navigator.userAgent;var v=r?".daily.taobao.net":".taobao.com";var g=e.Global._elCont;var b=o.appId==1||o.appId==2;var h=o.appId==2;var y=o.appId==1;var _=o.pageId=="mallfp"||o.bizId=="mallfp";var I=o.appId==2003;var w=o.appId==15;var M=!!o.bizId;var S=o.sysId=="act";if(!_){o.showSiteNavLogo=true}var T=e.globalToolFn.contentReady;var k=e.globalToolFn.formatPoint;var L=e.globalToolFn.getLoginUrl;var C=e.globalToolFn.getLogoutUrl;var j=e.Global._siteNavConfig;e._openFlags={};T("login-info",function(){e.Global._writeLoginInfo()});T("site-nav",function(){e.Global._init()});t.mix(e.Global,{_init:function(){b=o.appId==1||o.appId==2;h=o.appId==2;y=o.appId==1;_=o.pageId=="mallfp"||o.bizId=="mallfp";I=o.appId==2003;w=o.appId==15;M=!!o.bizId;S=o.sysId=="act";if(!this._subMenus){this._subMenus=[]}for(var e in q){q[e]()}},writeLoginInfo:function(a){j=e.globalToolFn.merge(j,a);e.environment.isApp=j.isApp;e.environment.passCookie=j.passCookie},_writeLoginInfo:function(){var a=g.siteNavElem=n.getElementById("site-nav");var t=g.loginInfo=n.getElementById("login-info");var i=o.brandSiteInfo;if(i&&i.brandSiteUrl&&i.brandSiteName){var r=n.createElement("p");p.id="simple-logo";p.className="sn-simple-logo";r.innerHTML='<a class="sn-simple-logo-link" href="//www.tmall.com/" title="\u5929\u732b\u9996\u9875">\u5929\u732b\u9996\u9875</a>'+'<a class="sn-simple-logo-shop" href="'+i.brandSiteUrl+'" title="'+i.brandSiteName+'">'+i.brandSiteName+"</a>";t.parentNode.insertBefore(r,t)}else if(o.showSiteNavLogo){var s=n.createElement("p");s.className="sn-back-home";s.innerHTML='<i class="mui-global-iconfont">&#xf012b;</i><a href="//www.tmall.com/">\u5929\u732b\u9996\u9875</a>';t.parentNode.insertBefore(s,t)}if(o.subUserNick){var l='\u60a8\u597d\uff0c<span class="sn-user-nick">'+o.subUserNick+'</span>                            <a target="_top" href="//login'+v+'/member/logout.jhtml" id="J_Logout">\u9000\u51fa</a>';t.innerHTML=l;return}var m=e.Global;m.loginStatusReady(function(e){m._initUserInfo(e,a,j)});m._initLoginStatus()},updateLoginInfo:function(){e._isLoginStatusReady=false;e._isMemberInfoReady=false;e.environment.isApp=false;var a=g.siteNavElem;e.Global.loginStatusReady(function(n){e.Global._initUserInfo(n,a,j)});e.Global._initLoginStatus()},_initUserInfo:function(t,i,o){var u=e.Global;var c=o.spaceServer;var f=o.registerServer;var d=o.miaoxinServer;var v=d;var g=L();var p=C();if(r){c="//vip.daily.tmall.net/vip/index.htm";f+="?isDaily=1";d="//vip.daily.tmall.net";v=d+"/messagebox/index.htm"}c+="?t="+ +(new Date).getTime();var b=n.getElementById("login-info");if(!b){return}var h="";if(t.isLogin){h='<span class="sn-welcome-info">                                <span>Hi\uff0c</span>                                <a target="_top"class="j_Username j_UserNick sn-user-nick" href="'+c+'" title="'+t.nick+'">'+t.nick+'</a>                                <a class="j_Identity sn-identity hidden" target="_top"></a>                                <a class="j_Point sn-point hidden" target="_top" href="//vip.tmall.com/point/all?from=top&scm=1027.1.1.4">\u79ef\u5206<em class="j_PointValue sn-point-value">0</em>                                </a>                        </span>                        <span class="j_Message hidden sn-message-cont">                            <span class="j_MessageCont">                                <a target="_top" href="//vip.tmall.com/message/tmaller?spm=3.1000473.0.4.equqSK&from=messagebox&scm=1027.1.1.5" class="j_MessageText sn-all-msg menu-hd">\u6d88\u606f<em class="j_MessageNum sn-msg-num">0</em>                                </a>                            </span>                        </span>                        <span class="sn-msg-box j_MesssageBox hidden">                            <i class="sn-msg-hd"></i>                            <span class="sn-msg-bd">                                <a href="#" class="j_MessageTitle sn-msg-title">\u52a0\u5165\u79ef\u5206\u805a\u4e50\u90e8</a>                                <b class="j_CloseMessage sn-msg-close">&times;</b>                            </span>                        </span>                        <span class="sn-welcome-info">                            <a class="sn-logout" target="_top" href="'+p+'" id="J_Logout">\u9000\u51fa</a>                        </span>';b.innerHTML=h;var y=n.getElementById("sn-bd");var _=i.getElementsByClassName("j_UserNick")[0];var I=110;if(y&&y.offsetWidth<990){I=80;_.style.maxWidth=I+"px"}if(m){if(_.offsetWidth>I){_.style.width=I}}if(s||a.g_config.notNeedMemberInfo){}else{u.memberInfoReady(function(e){if(l){u._initSellerFlag(e)}else{u._initMemberInfoDetail(e,v)}})}u._initMemberInfo()}else{h='<em>\u55b5\uff0c\u6b22\u8fce\u6765\u5929\u732b</em><a class="sn-login" href="'+g+'" target="_top">\u8bf7\u767b\u5f55</a><a class="sn-register" href="'+f+'" target="_top">\u514d\u8d39\u6ce8\u518c</a>';if(s){h='<em>\u55b5\uff0c\u6b22\u8fce\u6765\u5929\u732b\u56fd\u9645</em><a class="sn-login" href="'+g+'" target="_top">\u8bf7\u767b\u5f55</a>'}b.innerHTML=h;u._fireMemberInfoReadyFnList()}},_initSellerFlag:function(e){var a=g.siteNavElem;var n=e.memberInfo;var i=a.getElementsByClassName("j_Identity")[0];var o=a.getElementsByClassName("j_Username")[0];if(l&&e.isMallSeller){o.href="//zhaoshang.mall.taobao.com/udform/udfPageFromPc.htm?from=top&scm=1027.1.1.6"}if(e.isMallSeller){t.addClass(i," sn-vip1");i.href="//zhaoshang.mall.taobao.com/udform/udfPageFromPc.htm?from=top&scm=1027.1.1.7";i.title="\u5546\u5bb6\u8d26\u53f7";i.innerHTML="<span>\u5546</span>";t.removeClass(i,"hidden")}else{if(n.activeStatus!=-99){if(n.activeStatus>=1){t.addClass(i.className,"sn-vip"+n.activeStatus);i.href="//vip.tmall.com/vip/index.htm?from=top&scm=1027.1.1.2";i.title="T"+n.activeStatus+"\u5929\u732b\u4f1a\u5458";i.innerHTML="<span>T"+n.activeStatus+"</span>"}else{i.innerHTML="<span>T</span>";i.href="//vip.tmall.com/vip/index.htm?layer=activation&from=top&scm=1027.1.1.3";i.title="\u52a0\u5165Tmall\u4ff1\u4e50\u90e8\uff0c\u6210\u4e3a\u5929\u732b\u4f1a\u5458"}t.removeClass(i,"hidden")}}},_initMemberInfoDetail:function(e,a){var i=g.siteNavElem;var o=e.memberInfo;if(!o||!e.isLogin||o.status=="error"){return}var r='<a target="_top" href="'+a+'" class="j_MessageText sn-all-msg menu-hd">\u6d88\u606f<em class="j_MessageNum sn-msg-num">0</em>                    <b></b>                </a>                <span class="sn-msg-body j_MessageBody menu-bd">                    <a class="sn-shop-msg" href="'+a+'?tab=index&scm=1040.1.0.0"><em>0</em><span>\u5e97\u94fa\u6d88\u606f</span></a>                    <a class="sn-tmaller-msg" href="'+a+'?tab=tmaller&scm=1040.4.0.0&nbsp"><em>0</em><span>\u8fbe\u4eba\u6d88\u606f</span></a>                    <a class="sn-system-msg" href="'+a+'?tab=system&scm=1040.3.0.0"><em>0</em><span>\u7cfb\u7edf\u6d88\u606f</span></a>                    <a class="sn-infant-msg" href="'+a+'?tab=infant&scm=1040.2.0.0"><em>0</em><span>\u6bcd\u5a74\u6d88\u606f</span></a>                </span>';var s;var l=o.lastMessageType;var m=["","index","tmaller","system","infant"];var c=m[l];var f=g.snMessageCont=n.querySelector(".j_MessageCont");var d=g.snMessage=n.querySelector(".j_Message");if(false){t.addClass(f,"sn-menu");t.addClass(d,"sn-miao-message");f.innerHTML=r;setTimeout(function(){var e=n.querySelector(".j_MessageBody");var a=e.getElementsByTagName("a");o.newMsgList.forEach(function(e,n){a[n-1].getElementsByTagName("em")[0].innerHTML=e})},10);s=a+"?tab="+c+"&scm=1040."+l+".0.0"}else{s=o.lastMessageUrl}if(o.activeStatus!=-99){var v=i.querySelector(".j_Identity");if(o.activeStatus>=1){t.addClass(v,"sn-vip"+o.activeStatus);v.href="//vip.tmall.com/vip/index.htm?from=top&scm=1027.1.1.2";v.title="T"+o.activeStatus+"\u5929\u732b\u4f1a\u5458";v.innerHTML="<span>T"+o.activeStatus+"</span>"}else{v.innerHTML="<span>T</span>";v.href="//vip.tmall.com/vip/index.htm?layer=activation&from=top&scm=1027.1.1.3";v.title="\u52a0\u5165Tmall\u4ff1\u4e50\u90e8\uff0c\u6210\u4e3a\u5929\u732b\u4f1a\u5458"}t.removeClass(v,"hidden")}if(o.availablePoints>=0&&o.availablePoints!=-99){var p=i.querySelector(".j_PointValue");p.innerHTML=k(o.availablePoints);var b=i.querySelector(".j_Point");t.removeClass(b,"hidden")}if(o.newMessage>0&&o.lastMessage&&c){g.snMsgText=i.querySelector(".j_MessageText");g.snMsgText.href=s}if((o.newMessage||o.newMessage==0)&&o.newMessage!=-99){var h=i.querySelector(".j_MessageNum");var y="56px";if(o.newMessage<10){h.innerHTML=o.newMessage}else if(o.newMessage<=99){h.innerHTML=o.newMessage;y="64px"}else{h.innerHTML="99+";y="74px"}var _=i.querySelector(".j_Message");if(u){_.style.width=y}t.removeClass(_,"hidden")}},run:function(){},getCartElem:function(){var e=g.siteNavElem;return e&&e.querySelector(".sn-cart")},_addMenu:function(e){if(!e){return}var a=this;var n=e.querySelector(".menu-hd");var o=e.querySelector(".menu-bd");if(!o||!n){return}n.tabIndex=0;if(!a._subMenus){a._subMenus=[]}a._subMenus.push(o);o.setAttribute("role","menu");o.setAttribute("aria-hidden","true");n.setAttribute("aria-haspopup","true");n.setAttribute("aria-label","\u7a7a\u683c\u952e\u5f39\u51fa\u83dc\u5355\uff0cesc\u5173\u95ed\u5f53\u524d\u83dc\u5355");var r="hover";i.on(e,"keydown",function(a){var i=a.keyCode;if(i==27||i==37||i==38){t.removeClass(e,r);o.setAttribute("aria-hidden","true");n.focus();a.preventDefault?a.preventDefault():a.returnValue=false}else if(i==32){t.addClass(e,r);o.setAttribute("aria-hidden","false");a.preventDefault?a.preventDefault():a.returnValue=false}});var s;i.on(e,"focusin",function(){if(s){clearTimeout(s);s=null}});i.on(e,"focusout",function(){s=setTimeout(function(){t.removeClass(e,r);o.setAttribute("aria-hidden","true")},100)})}});var q={ieHandler:function(){var e=a.location.hostname.indexOf("tmall.com")>=0||a.location.hostname.indexOf("tmall.net")>=0||a.location.hostname.indexOf("tmall.hk")>=0;if(!e){return}var o;var r="//www.tmall.com/wow/portal/act/app-download";var s="http://www.uc.cn/ucbrowser/download/";var l="http://www.microsoft.com/zh-cn/windows/windows-10-upgrade";var u=d.toLowerCase();var v=u.indexOf("windows nt 5")>=0||u.indexOf("windows nt 6.0")>=0;i.ready(function(){if(m&&!h&&v){var e="//g.alicdn.com/s.gif";var i="//gcodex.alicdn.com/web/doTransit.do?url=";var u="//www.tmall.com/wow/portal/act/app-download";if(I){var d=t.unparam(a.location.search.replace("?",""))||{};o=u+"?mmstat=global_list&type=list&key="+d.q;e=i+encodeURIComponent(o)}else if(y){var g="";if(a.g_config&&a.g_config.itemId){g=a.g_config.itemId}if(g){o=u+"?mmstat=global_detail&type=detail&key="+g;e=i+encodeURIComponent(o)}}else{o=u+"?mmstat=global_zebra&type=internal&key="+a.location.href;e=i+encodeURIComponent(o)}var p=n.createElement("div");p.id="J_ieCover";p.className="mui-global-ie-cover";var b=n.createElement("div");b.id="J_ieCoverContent";b.className="mui-global-ie-cover-content";b.setAttribute("data-spm","a2226mw");b.innerHTML='<iframe src="about: blank" class="mui-global-ie-iframe"></iframe>                <div class="mui-global-ie-cover-inner">                    <a class="mui-global-ie-ieLink" href="'+l+'" title="\u70b9\u51fb\u5347\u7ea7\u6d4f\u89c8\u5668"></a>                    <a class="mui-global-ie-ucLink" href="'+s+'" title="UC\u6d4f\u89c8\u5668web\u7248"></a>                    <img class="mui-global-ie-qrcode" src="'+e+'" width="96"/>                </div>';t.addClass(n.body,"mui-global-ie-100");t.addClass(n.documentElement,"mui-global-ie-100");p.style.height=t.viewportHeight()+"px";n.body.appendChild(p);n.body.appendChild(b)}else if(c||f||m&&h){var _=n.createElement("div");_.id="J_BrowserUpdate";_.className="mui-global-browser-update";_.setAttribute("data-spm","a2226mw");_.innerHTML='<span class="mui-global-update-inner">                    <a class="mui-global-tmall-app-icon" title="\u624b\u673a\u5929\u732b" href="'+r+'"></a>                    <span id="J_updateNotice">\u55b5~\u4e3a\u4e86\u4fdd\u969c\u8d2d\u7269\u5b89\u5168\uff0c\u4eab\u53d7\u66f4\u68d2\u7684\u8d2d\u7269\u4f53\u9a8c\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528<a title="\u624b\u673a\u5929\u732b" href="'+r+'">\u624b\u673a\u5929\u732b</a>\u6d4f\u89c8\uff0c\u6216\u8005\u4f7f\u7528<a href="'+l+'" target="_blank" title="\u70b9\u51fb\u5347\u7ea7\u6d4f\u89c8\u5668">\u65b0\u7248\u672cIE\u6d4f\u89c8\u5668</a>\u6216<a class="mui-global-uc-link" href="'+s+'" title="UC\u6d4f\u89c8\u5668web\u7248">UC\u6d4f\u89c8\u5668</a>                    </span>                </span>';var w=n.getElementsByTagName("div")[0];if(w){n.body.insertBefore(_,w)}}})},siteNav:function(){var a=g.siteNavElem;if(!a)return;a.setAttribute("role","navigation");[].slice.call(a.querySelectorAll(".sn-menu")).forEach(function(e){TB.Global._addMenu(e)});e.Global.loginStatusReady(function(e){if(e.isLogin){if(e.isMallSeller){var n=a.getElementsByClassName("j_MyTaobao")[0];var i=a.getElementsByClassName("j_SellerCenter")[0];if(i&&n){t.addClass(n,"hidden");t.addClass(i,"hidden")}}}})},initLogout:function(){var t=n.getElementById("J_Logout");if(!t){return}e.Event.on(t,"click",function(e){e.preventDefault?e.preventDefault():e.returnValue=false;var n=t.href;(new Image).src="//taobao.alipay.com/user/logout.htm";setTimeout(function(){a.location.href=n},20)})}}}};n.exports=o});